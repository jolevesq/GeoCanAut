(function(){define(["jquery-private","gcaut-i18n","esri/request"],function(a,c,d){var e,b,f;e=function(i,k,m,h){var g;if(k===1||k===3){g={url:i+"?request=GetCapabilities",handleAs:"xml"};var j=new XMLHttpRequest();if(i==="http://wms.ess-ws.nrcan.gc.ca/wms/toporama_fr"){j.open("GET","wmsTest.xml",false)}else{if(i==="http://sampleserver1.arcgisonline.com/ArcGIS/services/Specialty/ESRI_StatesCitiesRivers_USA/MapServer/WMSServer"){j.open("GET","wmsEsriTest.xml",false)}else{if(i==="http://geoappext.nrcan.gc.ca/arcgis/rest/services/BaseMaps/CBMT_CBCT_GEOM_3978/MapServer/WMTS"){j.open("GET","wmtsEsriTest.xml",false)}}}j.send();var l=j.responseXML;m(i,k,l)}else{if(k===2||k===4||k===5){g={url:i,content:{f:"json"},handleAs:"json",callbackParamName:"callback"};g.load=function(n){m(i,k,n)};g.error=h;d(g)}}};b=function(h,j){var g=h.substring(0,h.indexOf("MapServer"))+"MapServer/layers",i=h.substring(h.lastIndexOf("/")+1,h.length);if(isNaN(i)){i=0}d({url:g,content:{f:"json"},handleAs:"json",callbackParamName:"callback",load:function(k){j.displaychild.symbol(JSON.stringify(k.layers[i].drawingInfo.renderer))},error:function(k){console.log("Not able to get renderer: "+k)}})};f=function(h,i,k,j){var g=i.substring(0,i.indexOf("MapServer"))+"MapServer/layers";d({url:g,content:{f:"json"},handleAs:"json",callbackParamName:"callback",load:function(l){j(h,i,k,l.layers)},error:function(l){console.log("Not able to get renderer: "+l)}})};return{getResourceInfo:e,getEsriRendererInfo:b,getEsriServRendererInfo:f}})}());