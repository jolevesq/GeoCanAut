(function(){define(["knockout","gcaut-func"],function(b,a){var d,c,e;d=function(h,j,p,i,q){var v,r,o,w,m=[],s=h.layers.length-1,l=-1,n=h.layers,u=h.initialExtent,f=h.fullExtent,k=p,g,t;while(l!==s){w={};v=n[l+1];r=v.name;o=v.id;w.name=r;w.fullname=r;w.url=k+"/"+o;w.id=o;w.scale={min:b.observable(v.minScale).extend({numeric:{precision:0}}),max:b.observable(v.maxScale).extend({numeric:{precision:0}})};w.isChecked=b.observable(false);w.isUse=b.observable(false);w.cluster={enable:b.observable(false),distance:b.observable(50).extend({numeric:{precision:0}}),label:b.observable(false),symbol:b.observable(false),maxsizeprop:b.observable(50).extend({numeric:{precision:0}}),maxdataprop:b.observable(1000).extend({numeric:{precision:0}})};w.type=i;w.servLayers=c(v,n,[],k,w.fullname,j,i);w.isChecked=b.observable(false);w.isUse=b.observable(false);if(w.servLayers.length>0){l=e(w.servLayers,0)}else{l=w.id}m.push(w)}j.servLayers([]);j.servLayers(m);if(q==="base"){j.selectMapSR(j.srType[a.getSrTypeIndex(j.srType,h.spatialReference.wkid)]);if(typeof h.tileInfo!=="undefined"){g=h.tileInfo.lods;t=g.length;while(t--){g[t].isChecked=b.observable(true)}j.lods(g)}j.maxExtentMinX(f.xmin);j.maxExtentMinY(f.ymin);j.maxExtentMaxX(f.xmax);j.maxExtentMaxY(f.ymax);j.initExtentMinX(u.xmin);j.initExtentMinY(u.ymin);j.initExtentMaxX(u.xmax);j.initExtentMaxY(u.ymax)}};c=function(p,g,k,f,r,o,n){var l={},i,h,q,j,m;i=p.subLayerIds;if(i!==null){m=i.length;while(m--){l={};l.servLayers=[];h=g[i[m]];q=h.name;j=h.id;l.name=q;l.fullname=r+"***"+q;l.url=f+"/"+j;l.id=j;l.scale={min:h.minScale,max:h.maxScale};l.cluster={enable:b.observable(false),distance:b.observable(50).extend({numeric:{precision:0}}),label:b.observable(false),symbol:b.observable(false),maxsizeprop:b.observable(50).extend({numeric:{precision:0}}),maxdataprop:b.observable(1000).extend({numeric:{precision:0}})};l.isChecked=b.observable(false);l.isUse=b.observable(false);l.type=n;k.push(l);c(h,g,k[k.length-1].servLayers,f,l.fullname,o,n)}}return k};e=function(g,j){var i,f,h;if(g.length>0){f=g.length;while(f--){h=g[f].servLayers;if(h.length>0){i=e(h,j);j=(i>j)?i:j}else{i=g[f].id;j=(i>j)?i:j}}}return j};return{readInfo:d}})}());