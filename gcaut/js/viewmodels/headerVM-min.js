(function(){define(["jquery-private","knockout","gcaut-i18n","gcaut-func"],function(f,c,g,b){var a,d,e;a=function(i,k,h){var j=function(o,n,y){var u=this,r=y.length,x=n.title,p=n.about,l=n.print,q=b.getListCB(g.getDict("%header-abouttypelist")),v=b.getListCB(g.getDict("%header-printtypelist")),m=locationPath+"gcaut/images/headTools.png",z=locationPath+"gcaut/images/headAbout.png",t=locationPath+"gcaut/images/headPrint.png",s=locationPath+"gcaut/images/headShowInset.png",w=locationPath+"gcaut/images/headFullscreen.png";u.imgTools=m;u.imgAbout=z;u.imgPrint=t;u.imgInset=s;u.imgFullscreen=w;u.lblMapTitle=g.getDict("%header-mapname");u.lblMapTitleAlt=g.getDict("%header-mapnamealt");u.lblEnbTools=g.getDict("%header-lblbutton");u.lblTools=g.getDict("%header-tools");u.lblAbout=g.getDict("%header-about");u.lblAboutType=g.getDict("%header-abouttype");u.lblAboutValue=g.getDict("%header-aboutvalue");u.lblPrint=g.getDict("%header-print");u.lblPrintType=g.getDict("%header-printtype");u.lblInset=g.getDict("%header-inset");u.lblFulscreen=g.getDict("%header-fullscreen");u.lblTitleChar=g.getDict("%header-msgtitle");u.mapTitleValue=c.observable(x.value);u.mapAltValue=c.observable(x.alttext);u.mapTitleWidth=c.observable();u.mapTitleCount=c.computed(function(){return(u.mapTitleWidth()-u.mapTitleValue().length)+u.lblTitleChar});u.isTools=c.observable(n.tools);u.isInset=c.observable(false);u.isLink=c.observable(n.link);u.isFullscreen=c.observable(n.fullscreen);u.isAbout=c.observable(p.enable);u.aboutType=q;u.selectAbout=c.observable(u.aboutType[p.type-1]);u.aboutValue=c.observable(p.value);u.isPrint=c.observable(l.enable);u.printType=v;u.selectPrint=c.observable(u.printType[l.type-1]);d(c,o);u.init=function(){setTimeout(function(){u.mapTitleWidth((b.getElemValueVM("map","mapWidthValue")-325)/5)},500);return{controlsDescendantBindings:true}};u.bind=function(){d(c,o);c.applyBindings(u,o)};u.updateTitle=function(A){u.mapTitleWidth((A-325)/5)};u.write=function(){var A;u.isLink(b.getElemValueVM("map","isLink"));A='"header": {"title": {"value": "'+u.mapTitleValue()+'","alttext": "'+u.mapAltValue()+'"},"tools": '+u.isTools()+',"link": '+u.isLink()+',"inset": '+u.isInset()+',"about": {"enable": '+u.isAbout()+',"type": '+u.selectAbout().id+',"value": "'+u.aboutValue()+'"},"print": {"enable": '+u.isPrint()+',"type": '+u.selectPrint().id+'},"fullscreen": '+u.isFullscreen()+"}";return A};while(r--){y[r].value.subscribe(u[y[r].func],u)}u.init()};e=new j(i,k,h);c.applyBindings(e,i);return e};d=function(h,i){h.cleanNode(i)};return{initialize:a,clean:d}})}).call(this);